<pre class="line-numbers"><code class="language-java"><span class="line"><span class="token comment" spellcheck="true">// Member of a family with arbitrary amount of parents.</span></span>
<span class="token comment" spellcheck="true"><span class="line">// FamilyMembers are siblings if they share a parent.</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FamilyMember</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">final</span> String name<span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">final</span> Set<span class="token operator">&lt;</span>FamilyMember<span class="token operator">></span> children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">final</span> Set<span class="token operator">&lt;</span>FamilyMember<span class="token operator">></span> parents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">public</span> <span class="token function">FamilyMember</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> FamilyMember<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> parents<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">for</span> <span class="token punctuation">(</span>FamilyMember parent<span class="token operator">:</span> parents<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">				<span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">boolean</span> <span class="token function">isParentOf</span><span class="token punctuation">(</span>FamilyMember potentialChild<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> children<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>potentialChild<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">boolean</span> <span class="token function">isSiblingOf</span><span class="token punctuation">(</span>FamilyMember potentialSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">boolean</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token keyword">for</span> <span class="token punctuation">(</span>FamilyMember parent<span class="token operator">:</span> parents<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				result <span class="token operator">=</span> result <span class="token operator">||</span> parent<span class="token punctuation">.</span><span class="token function">isParentOf</span><span class="token punctuation">(</span>potentialSibling<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">return</span> result<span class="token punctuation">;</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span>
</code></pre>